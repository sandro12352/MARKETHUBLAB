<!-- Card -->
<div
    class="bg-[#0B0C15]/60 backdrop-blur-xl border border-white/10 rounded-2xl p-6 sm:p-8 shadow-2xl relative overflow-hidden group animate-in fade-in slide-in-from-bottom-4 duration-1200">

    <!-- Subtle top highlight -->
    <div class="absolute top-0 left-0 w-full h-[1px] bg-gradient-to-r from-transparent via-white/10 to-transparent">
    </div>

    <form [formGroup]="loginForm" class="space-y-5" (ngSubmit)="onSubmit()">

        <!-- Email Input -->
        <div class="space-y-1.5">
            <label for="email" class="block text-xs font-medium text-neutral-400">Correo Electrónico</label>
            <div class="relative group/input">
                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                    <iconify-icon icon="lucide:mail"
                        class="text-neutral-500 group-focus-within/input:text-indigo-400 transition-colors"
                        width="16"></iconify-icon>
                </div>
                <input id="email" name="email" formControlName="email" type="email"
                    class="block w-full pl-9 pr-3 py-2.5 bg-white/[0.03] border border-white/10 rounded-lg text-sm text-neutral-200 placeholder-neutral-600 focus:outline-none focus:border-indigo-500/50 focus:bg-white/[0.05] focus:ring-1 focus:ring-indigo-500/20 transition-all shadow-sm"
                    placeholder="nombre@empresa.com" autocomplete="off">
            </div>
            @if (email?.invalid && (email?.dirty || email?.touched)) {
            <div class="flex gap-1 animate-in fade-in slide-in-from-top-1 duration-300">
                <iconify-icon icon="lucide:alert-circle" class="text-red-400" width="14"></iconify-icon>

                @if (email?.hasError('required')) {
                <p class="text-[11px] font-medium text-red-400/90 tracking-wide">
                    El correo electrónico es obligatorio
                </p>
                }
                @if (email?.hasError('email')) {
                <p class="text-[11px] font-medium text-red-400/90 tracking-wide">
                    Introduce una dirección de correo válida
                </p>
                }
            </div>
            }

        </div>

        <div class="space-y-1.5">
            <div class="flex items-center justify-between">
                <label for="password" class="block text-xs font-medium text-neutral-400">Contraseña</label>
                <a href="#" class="text-xs text-indigo-400 hover:text-indigo-300 transition-colors">¿Olvidaste tu
                    contraseña?</a>
            </div>
            <div class="relative group/input">
                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                    <iconify-icon icon="lucide:lock"
                        class="text-neutral-500 group-focus-within/input:text-indigo-400 transition-colors"
                        width="16"></iconify-icon>
                </div>

                <input id="password" formControlName="password" [type]="showPassword() ? 'text' : 'password'"
                    [class.border-red-500\/50]="password?.invalid && (password?.dirty || password?.touched)"
                    class="block w-full pl-9 pr-10 py-2.5 bg-white/[0.03] border border-white/10 rounded-lg text-sm text-neutral-200 placeholder-neutral-600 focus:outline-none focus:border-indigo-500/50 focus:bg-white/[0.05] focus:ring-1 focus:ring-indigo-500/20 transition-all shadow-sm"
                    placeholder="••••••••">

                <button type="button" (click)="togglePassword()"
                    class="absolute inset-y-0 right-0 pr-3 flex items-center text-neutral-600 hover:text-neutral-400 transition-colors cursor-pointer">
                    <iconify-icon [icon]="showPassword() ? 'lucide:eye-off' : 'lucide:eye'" width="16">
                    </iconify-icon>
                </button>
            </div>

            @if (password?.invalid && (password?.dirty || password?.touched)) {
            <div class="flex items-center gap-2 mt-1.5 px-1 animate-in fade-in slide-in-from-top-1 duration-200">
                <iconify-icon icon="lucide:alert-circle" class="text-red-400" width="14"></iconify-icon>
                <p class="text-[11px] font-medium text-red-400/90 tracking-wide">
                    @if (password?.hasError('required')) { La contraseña es obligatoria }
                    @else if (password?.hasError('minlength')) { Debe tener al menos 8 caracteres }
                </p>
            </div>
            }
        </div>

        <!-- Checkbox & Submit -->
        <div class="flex items-center pt-1">
            <label class="relative flex items-center cursor-pointer group">
                <input formControlName="rememberMe" type="checkbox" id="rememberMe" class="sr-only">
                <div class="w-4 h-4 border rounded transition-all duration-100 flex items-center justify-center"
                    [ngClass]="{
                    'bg-indigo-600 border-indigo-600 shadow-[0_0_10px_rgba(79,70,229,0.4)]': loginForm.get('rememberMe')?.value,
                    'bg-white/[0.03] border-white/20': !loginForm.get('rememberMe')?.value
                    }">

                    @if (loginForm.get('rememberMe')?.value) {
                    <iconify-icon icon="lucide:check"
                        class="text-white text-[10px] font-bold animate-in zoom-in duration-150">
                    </iconify-icon>
                    }
                </div>
                <span
                    class="ml-2 text-xs text-neutral-400 group-hover/check:text-neutral-300 transition-colors">Recordar
                    dispositivo por 30 días</span>
            </label>
        </div>



        <button type="submit" [disabled]="isLoading()"
            class="w-full py-2.5 px-4 bg-indigo-600 hover:bg-indigo-500 text-white text-sm font-medium rounded-lg shadow-lg shadow-indigo-900/20 border border-transparent hover:border-indigo-400/30 transition-all flex items-center justify-center gap-2 group/btn transform hover:scale-105 hover:cursor-pointer duration-200 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed">
            <span>{{ isLoading() ? 'Autenticando...' : 'Iniciar Sesión' }}</span>
            @if(isLoading()){
            <iconify-icon icon="lucide:loader-2" class="animate-spin" width="16">
            </iconify-icon>
            }@else {
            <iconify-icon icon="lucide:arrow-right" class="group-hover/btn:translate-x-0.5 transition-transform"
                width="16">
            </iconify-icon>
            }

        </button>
        @if (errorMessage()) {
        <div
            class="flex items-center gap-2 p-3 mb-4 rounded-lg bg-red-500/10 border border-red-500/20 animate-in fade-in zoom-in duration-200">
            <iconify-icon icon="lucide:alert-triangle" class="text-red-400" width="18"></iconify-icon>
            <p class="text-xs text-red-200 font-medium">{{ errorMessage() }}</p>
        </div>
        }

    </form>

    <div class="relative py-6">
        <div class="absolute inset-0 flex items-center">
            <div class="w-full border-t border-white/10"></div>
        </div>
        <div class="relative flex justify-center text-xs">
            <span class="px-2 bg-[#0E0F19] text-neutral-500 uppercase tracking-wider">O continúa con</span>
        </div>
    </div>

    <div class="grid grid-cols-2 gap-3">
        <button type="button"
            class="flex items-center justify-center gap-2 py-2.5 px-4 bg-white/[0.03] hover:bg-white/[0.08] border border-white/10 rounded-lg text-sm font-medium text-neutral-300 transition-all hover:border-white/20">
            <iconify-icon icon="lucide:github" width="16"></iconify-icon>
            <span>GitHub</span>
        </button>
        <button type="button"
            class="flex items-center justify-center gap-2 py-2.5 px-4 bg-white/[0.03] hover:bg-white/[0.08] border border-white/10 rounded-lg text-sm font-medium text-neutral-300 transition-all hover:border-white/20">
            <iconify-icon icon="logos:google-icon" width="15"></iconify-icon>
            <span>Google</span>
        </button>
    </div>
</div>